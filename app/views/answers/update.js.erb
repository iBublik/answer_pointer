$('.notifications').html('<%= j render 'layouts/notifications' %>');
var answerId = <%= @answer.id %>;
<% if @answer.errors.present? %>
    var $answerForm = $('form#edit-answer-' + answerId);
    var $errors = $answerForm.children('.error_explanation');
    var errorsHtml = '<%= j render 'layouts/errors', object: @answer %>';
    if ($errors.length) {
        $errors.html(errorsHtml);
    } else {
        $answerForm.prepend(errorsHtml);
        $errors = $answerForm.children('.error_explanation');
    }
    $errors.stop().css( {opacity: 1} ).fadeOut(5000, function() {
        $(this).remove();
    });
<% else %>
    var $answer = $('#answer-' + answerId);
    $answer.children('.answer-body').text('<%= @answer.body %>');
    var $editForm = $answer.children('form#edit-answer-' + answerId);
    $editForm.hide();
    var $editLink = $answer.children('.edit-answer-link');
    $editLink.show();

    $editLink.click(function(e) {
        e.preventDefault();
        $(this).hide();
        $editForm.show();
    });
<% end %>