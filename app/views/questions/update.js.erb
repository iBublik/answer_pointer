var questionId = <%= @question.id %>;
<% if @question.errors.present? %>
    var $questionForm = $('form#edit-question-' + questionId);
    var $errors = $questionForm.children('.error_explanation');
    var errorsHtml = '<%= j render 'layouts/errors', object: @question %>';
    if ($errors.length) {
        $errors.html(errorsHtml);
    } else {
        $questionForm.prepend(errorsHtml);
        $errors = $questionForm.children('.error_explanation');
    }
    $errors.stop().css( {opacity: 1} ).fadeOut(5000, function(){
        $(this).remove();
    });
<% else %>
    var $question = $('#question-' + questionId);
    $question.children('.question-title').text('<%= @question.title %>');
    $question.children('.question-body').text('<%= @question.body %>');
    var $editForm = $question.children('form#edit-question-' + questionId);
    $editForm.hide();
    var $editLink = $question.children('.edit-question-link');
    $editLink.show();

    $editLink.click(function(e) {
        e.preventDefault();
        $(this).hide();
        $editForm.show();
    });
<% end %>